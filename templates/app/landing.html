{% extends "app/base.html" %}
{% load static %}

{% block title %}AI Email Assistant - Welcome{% endblock %}

{% block extra_head %}
<style>
    /* Animation for hero elements */
    .fade-in-up {
        animation: fadeInUp 0.8s ease-out forwards;
        opacity: 0;
        transform: translateY(20px);
    }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
    .sparkle { animation: sparkle-pulse 2.5s ease-in-out infinite; }
    @keyframes sparkle-pulse { 0%, 100% { transform: scale(0.95); opacity: 0.8; } 50% { transform: scale(1.05); opacity: 1; } }
    .delay-1 { animation-delay: 0.2s; }
    .delay-2 { animation-delay: 0.4s; }
    .delay-3 { animation-delay: 0.6s; }
    .delay-4 { animation-delay: 0.8s; }
    .delay-5 { animation-delay: 1.0s; }
    .delay-6 { animation-delay: 1.2s; }
    
    /* Modal styles */
    .modal-backdrop {
        transition: opacity 0.3s ease-in-out;
    }
    .modal-content {
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }
    .modal-tab.active {
        border-color: #4f46e5; /* A distinct color for the active tab */
        color: #111827; /* Dark text for light mode */
    }
    .dark .modal-tab.active {
        border-color: #60a5fa; /* A lighter color for dark mode */
        color: #f9fafb; /* Light text for dark mode */
    }
</style>
{% endblock %}

{% block content %}
<main>
    <div class="w-full text-center py-10">
        <!-- Main Graphic -->
        <div class="flex justify-center mb-10 fade-in-up">
            <div class="w-36 h-36 relative transition-transform duration-300 hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-full h-full">
                    <!-- Envelope -->
                    <path d="M15 25 H85 V75 H15 Z" class="fill-slate-200 dark:fill-slate-800" />
                    <path d="M15 25 L50 55 L85 25" class="fill-none stroke-slate-300 dark:stroke-slate-700" stroke-width="5" stroke-linejoin="round" stroke-linecap="round" />
                    <!-- AI Sparkle -->
                    <g class="sparkle text-slate-900 dark:text-white" transform="translate(72, 18)" style="transform-origin: center;">
                        <path d="M10 0 L12.5 7.5 L20 10 L12.5 12.5 L10 20 L7.5 12.5 L0 10 L7.5 7.5 Z" fill="currentColor" />
                    </g>
                </svg>
            </div>
        </div>
        
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight text-slate-900 dark:text-white fade-in-up delay-1">
            Write better emails.
            <span class="block">Instantly.</span>
        </h1>
        <p class="mt-6 text-lg sm:text-xl max-w-2xl mx-auto text-slate-600 dark:text-slate-400 fade-in-up delay-2">
            Generate professional and personalized replies in seconds. Powered by AI, designed to save you time and elevate your communication.
        </p>
        <div class="mt-10 flex flex-col sm:flex-row items-center justify-center gap-x-6 gap-y-4 fade-in-up delay-3">
            <a href="{% url 'reply_page' %}" class="inline-flex items-center justify-center px-6 py-3 bg-slate-900 text-white text-base font-semibold rounded-lg shadow-md hover:bg-slate-700 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-900 dark:focus-visible:ring-white dark:focus:ring-offset-slate-900 transition-colors">
                Get Started
            </a>
             <button id="how-it-works-button" class="inline-flex items-center justify-center px-6 py-3 bg-slate-200 text-slate-700 text-base font-semibold rounded-lg shadow-md hover:bg-slate-300 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-500 dark:focus:ring-offset-slate-900 transition-colors">
                How it works
            </button>
        </div>
        <!-- Abstract Visual Element -->

        <div class="mt-20 fade-in-up delay-4">

            <div class="relative w-full max-w-lg mx-auto h-48">

                <div class="absolute inset-0 bg-white dark:bg-slate-800/50 rounded-xl shadow-lg transform -skew-y-3"></div>

                <div class="absolute inset-0 bg-slate-200 dark:bg-slate-700 rounded-xl shadow-lg transform skew-y-3">

                    <div class="p-6 text-left text-sm text-slate-400 dark:text-slate-500">

                        <p>// Generating reply...</p>

                        <p class="mt-2">> Subject: Re: Project Update</p>

                        <p class="mt-4">> Body:  Sounds great, looking forward to it!...</p>

                    </div>

                </div>

            </div>

            </div>
        <!-- Features Section -->
        <div class="mt-20 max-w-5xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                <!-- Feature 1: Time Saving -->
                <div class="p-6 bg-white/50 dark:bg-slate-800/50 rounded-xl fade-in-up delay-4">
                    <div class="w-12 h-12 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-4">
                        <i data-lucide="clock" class="text-slate-900 dark:text-white"></i>
                    </div>
                    <h3 class="font-semibold text-slate-900 dark:text-white">Save Time</h3>
                    <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Stop staring at a blank page. Generate complete email drafts from a few keywords, freeing up hours every week.</p>
                </div>
                <!-- Feature 2: Professional Tone -->
                <div class="p-6 bg-white/50 dark:bg-slate-800/50 rounded-xl fade-in-up delay-5">
                    <div class="w-12 h-12 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-4">
                       <i data-lucide="award" class="text-slate-900 dark:text-white"></i>
                    </div>
                    <h3 class="font-semibold text-slate-900 dark:text-white">Stay Professional</h3>
                    <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Ensure every email you send is polished and professional. Select a tone, from formal to friendly, to match any situation.</p>
                </div>
                <!-- Feature 3: Effortless Replies -->
                <div class="p-6 bg-white/50 dark:bg-slate-800/50 rounded-xl fade-in-up delay-6">
                     <div class="w-12 h-12 bg-slate-200 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-4">
                       <i data-lucide="zap" class="text-slate-900 dark:text-white"></i>
                    </div>
                    <h3 class="font-semibold text-slate-900 dark:text-white">Effortless Replies</h3>
                    <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Understand the context of any email thread and reply with the perfect intent, from confirming details to politely declining.</p>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- "How It Works" Modal -->
<div id="how-it-works-modal" class="fixed inset-0 z-30 flex items-center justify-center p-4 hidden">
    <!-- Backdrop -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black/30 backdrop-blur-sm modal-backdrop opacity-0"></div>
    
    <!-- Modal Content -->
    <div class="modal-content bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 relative opacity-0 transform scale-95">
        <div class="flex justify-between items-center">
            <h2 class="text-lg font-bold text-slate-900 dark:text-white">How It Works</h2>
            <button id="modal-close-button" class="text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-1">
                <i data-lucide="x"></i>
            </button>
        </div>
        
        <!-- Modal Tabs -->
        <div class="border-b border-slate-200 dark:border-slate-700 mt-4">
          <nav class="-mb-px flex space-x-6" aria-label="Tabs">
            <button id="modal-tab-reply" class="modal-tab py-3 px-1 border-b-2 text-sm font-medium">For Replies</button>
            <button id="modal-tab-compose" class="modal-tab py-3 px-1 border-b-2 text-sm font-medium">For Composing</button>
          </nav>
        </div>
        
        <!-- Reply Instructions -->
        <div id="modal-content-reply" class="mt-4 space-y-4 text-sm text-slate-600 dark:text-slate-300">
            <p><strong>1. Provide Context:</strong> Enter the original sender's name and a summary of the email thread.</p>
            <p><strong>2. Define Your Goal:</strong> State your 'Reply Intent' (e.g., "accept invitation") and choose a 'Tone' (e.g., "Formal").</p>
            <p><strong>3. Generate:</strong> The AI drafts a professional, context-aware reply for you instantly.</p>
        </div>
        
        <!-- Compose Instructions -->
        <div id="modal-content-compose" class="hidden mt-4 space-y-4 text-sm text-slate-600 dark:text-slate-300">
            <p><strong>1. Set the Stage:</strong> Enter the recipient's name and the main 'Purpose' of your email.</p>
            <p><strong>2. Choose Your Tone:</strong> Select a style for your message, such as "Professional," "Friendly," or "Persuasive."</p>
            <p><strong>3. Generate:</strong> The AI composes a complete email from scratch, including a subject line and body.</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Modal elements
        const howItWorksButton = document.getElementById('how-it-works-button');
        const modal = document.getElementById('how-it-works-modal');
        const modalBackdrop = document.getElementById('modal-backdrop');
        const modalCloseButton = document.getElementById('modal-close-button');
        const modalContent = modal.querySelector('.modal-content');
        
        // Modal Tab elements
        const modalTabReply = document.getElementById('modal-tab-reply');
        const modalTabCompose = document.getElementById('modal-tab-compose');
        const modalContentReply = document.getElementById('modal-content-reply');
        const modalContentCompose = document.getElementById('modal-content-compose');

        const setModalActiveTab = (tabName) => {
            const replyTabClasses = ['border-transparent', 'text-gray-500', 'dark:text-gray-400', 'hover:border-gray-300', 'dark:hover:border-gray-600'];
            const composeTabClasses = [...replyTabClasses];

            if (tabName === 'reply') {
                modalTabReply.classList.remove(...replyTabClasses);
                modalTabReply.classList.add('active', 'border-blue-500', 'dark:border-blue-400', 'text-slate-900', 'dark:text-white');
                modalTabCompose.classList.add(...composeTabClasses);
                modalTabCompose.classList.remove('active', 'border-blue-500', 'dark:border-blue-400', 'text-slate-900', 'dark:text-white');
                modalContentReply.classList.remove('hidden');
                modalContentCompose.classList.add('hidden');
            } else {
                modalTabCompose.classList.remove(...composeTabClasses);
                modalTabCompose.classList.add('active', 'border-blue-500', 'dark:border-blue-400', 'text-slate-900', 'dark:text-white');
                modalTabReply.classList.add(...replyTabClasses);
                modalTabReply.classList.remove('active', 'border-blue-500', 'dark:border-blue-400', 'text-slate-900', 'dark:text-white');
                modalContentCompose.classList.remove('hidden');
                modalContentReply.classList.add('hidden');
            }
        };

        modalTabReply.addEventListener('click', () => setModalActiveTab('reply'));
        modalTabCompose.addEventListener('click', () => setModalActiveTab('compose'));


        const openModal = () => {
            setModalActiveTab('reply'); // Default to reply tab when opening
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalBackdrop.classList.remove('opacity-0');
                modalContent.classList.remove('opacity-0', 'scale-95');
            }, 10);
        };

        const closeModal = () => {
            modalBackdrop.classList.add('opacity-0');
            modalContent.classList.add('opacity-0', 'scale-95');
            setTimeout(() => modal.classList.add('hidden'), 300);
        };

        howItWorksButton.addEventListener('click', openModal);
        modalBackdrop.addEventListener('click', closeModal);
        modalCloseButton.addEventListener('click', closeModal);
    });
</script>
{% endblock %}
